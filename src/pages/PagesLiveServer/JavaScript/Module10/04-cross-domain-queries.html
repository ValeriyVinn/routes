<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Крос-доменні запити</title>
    <link rel="stylesheet" href="../css/styles.css" />
  </head>
  <body>
    <header class="header">
      <a href="../../../../indexLS.html" class="green">Home</a>
    </header>
    <main class="main">
      <h1>Крос-доменні запити</h1>
      <section class="section">
        <p>
          За замовчуванням HTTP-запит можна робити тільки в рамках поточного
          сайту. При спробі запиту на інший домен, порт або протокол, тобто
          виконати крос-доменний запит - браузер видає помилку. Це зроблено з
          міркувань безпеки і права доступу налаштовуються на бекенді. Якщо
          бекенд не підтримує крос-доменні запити, фронтенд-розробник нічого не
          зможе з цим зробити у своєму коді.
        </p>
        <p class="note">
          ЦІКАВО: <br />
          Ця політика браузерів називається CORS і розшифровується як
          Cross-Origin Resource Sharing, де Origin - це і є домен, порт або
          протокол. Дослівний переклад звучить як «спільне використання ресурсів
          між різними джерелами».
        </p>
        <p>
          На кожному запиті браузер сам додає HTTP-заголовок Origin, де вказує
          адресу веб-сторінки, яка хоче зробити HTTP-запит. Наприклад, якщо ми
          робимо fetch-запит з веб-сторінки https://my-site.com/about на
          https://my-api.com/users, то заголовки будуть наступними.
        </p>
        <pre class="code">
GET /users
Host: my-api.com
Origin: https://my-site.com
</pre
        >
        <p>
          Сервер перевіряє заголовок Origin і, якщо він підтримує крос-доменні
          запити, додає у відповідь спеціальний HTTP-заголовок
          Access-Control-Allow-Origin.
        </p>
        <pre class="code">
# Private API
Access-Control-Allow-Origin: https://my-site.com

# Public API
Access-Control-Allow-Origin: *
</pre
        >
        <p>
          Значенням цього заголовка буде дозволене джерело (Origin). У нашому
          випадку це повинен бути один сайт https://my-site.com, якщо бекенд
          приватний, або спецсимвол *, якщо бекенд публічний - дозволяє робити
          запити кому завгодно.
        </p>
        <img src="./img/cors.png" alt="cors" width="720" />
        <p>
          Тобто браузер - це певний посередник між JavaScript-кодом і бекендом.
          Він додає кожному запиту заголовок Origin з правильним значенням і
          перевіряє наявність заголовка Access-Control-Allow-Origin у відповіді.
          Якщо заголовок є і його значення підходить, виконається оригінальний
          запит і JavaScript-код отримає його результат, в іншому випадку буде
          помилка CORS.
        </p>
      </section>
    </main>
    <footer class="footer">Це футер</footer>

    <script
      src="./pages/PagesLiveServer/JavaScript/js/main.js"
      type="module"
    ></script>
  </body>
</html>
