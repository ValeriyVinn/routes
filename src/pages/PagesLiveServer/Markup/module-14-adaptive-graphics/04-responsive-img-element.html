<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Респонсивний елемент &lt;img&gt;</title>
    <link rel="stylesheet" href="../css/markup-style.css" />
  </head>
  <body>
    <a href="../markup.html">Markup</a>
    <h2>Респонсивний елемент &lt;img&gt;</h2>
    <section class="section">
      <p>
        Респонсивний елемент &lt;img&gt; використовується браузером для
        завантаження тільки того зображення, яке підходить для цього пристрою із
        запропонованих розробником. Розробник вказує список доступних для
        завантаження зображень, а браузер, виходячи з розміру екрану пристрою і
        його піксельної щільності, вибирає найбільш вдалий.
      </p>
      <img
        src="./img/responsive-img-tag.png"
        alt="responsive img tag"
        width="360"
      />
      <p>
        Наприклад, розробник вказав два доступних зображення - 300×300 і 600×600
        пікселів. Якщо браузеру достатньо зображення 300×300 - це чотириразова
        економія ваги зображення, яке завантажується. Що менший розмір екрана
        пристрою, то більше користі від такого підходу. Економія трафіку на
        мобільному пристрої може досягати 70-90%, порівняно з десктопом.
      </p>
      <h3>Атрибут srcset</h3>
      <p>
        Визначає список версій однакового зображення різних розмірів. Не варто
        намагатися завантажити різні зображення (за контентом або форматом) за
        допомогою цієї техніки, браузер звертає увагу тільки на розмір і вважає,
        що все, що передають в srcset - це версії одного й того самого
        зображення.
      </p>
      <pre class="code">
&lt;img&nbsp;srcset=&quot;&quot;&nbsp;src=&quot;&quot;&nbsp;alt=&quot;&quot;&nbsp;/&gt;  
</pre
      >
      <h3>Дескриптор x</h3>
      <p>
        Найпростіший спосіб використання респонсивного елемента &lt;img&gt; - це
        застосування дескриптора x, який буквально вказує браузеру, для якої
        щільності екрану підходить ця версія зображення.
      </p>
      <pre class="code">
&lt;img
<br>&nbsp;&nbsp;srcset=&quot;photo.jpg&nbsp;1x,&nbsp;photo@2x.jpg&nbsp;2x&quot;
<br>&nbsp;&nbsp;src=&quot;photo.jpg&quot;
<br>&nbsp;&nbsp;alt=&quot;Опис&nbsp;зображення&nbsp;для&nbsp;усіх&nbsp;версій&quot;
<br>/&gt;  
</pre>
      <p>
        В атрибуті src вказується версія зображення стандартної якості, яка буде
        використана у разі, якщо браузер старий і не знає про srcset. В атрибуті
        srcset вказуємо 1x і 2x версії зображення, розділяючи оголошення комою.
        Якщо сторінка буде відкрита на пристрої з щільністю пікселів 2 або вище,
        замість стандартного, буде використане зображення photo@2x.jpg.
      </p>
      <p>
        У прикладі для атрибута srcset вказані зображення стандартної і
        подвійної щільності, а також оригінальне зображення за замовчуванням в
        атрибуті src.
      </p>
      <div class="codepen">
        <p
          class="codepen"
          data-height="300"
          data-default-tab="html,result"
          data-slug-hash="pogezBv"
          data-pen-title="lesson-16-srcset-x"
          data-user="goit-academy"
          style="
            height: 300px;
            box-sizing: border-box;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid;
            margin: 1em 0;
            padding: 1em;
          "
        >
          <span
            >See the Pen
            <a href="https://codepen.io/goit-academy/pen/pogezBv">
              lesson-16-srcset-x</a
            >
            by goit-academy (<a href="https://codepen.io/goit-academy"
              >@goit-academy</a
            >) on <a href="https://codepen.io">CodePen</a>.</span
          >
        </p>
        <script
          async
          src="https://cpwebassets.codepen.io/assets/embed/ei.js"
        ></script>
      </div>
      <p>
        Якщо відкрити інструменти розробника і перейти на вкладку Network, то
        буде видно, що завантажується тільки одне зображення, що підходить для
        щільності екрану, на якому відкрита веб-сторінка. Відкриваючи з Macbook
        Pro 15" 2017, щільність пікселів екрану якого дорівнює 2, браузер
        завантажить зображення, у якого вказаний дескриптор 2x.
      </p>
      <img src="./img/srcset-x.png" alt="srcset x" width="820" />
      <p>
        Єдиний недолік такого підходу полягає в обмеженості критеріїв, за якими
        браузер вибирає зображення - тільки щільність пікселів екрану.
        Респонсивні зображення використовуються у респонсивній верстці, розміри
        блоків в якій змінюються, залежно від розміру в'юпорту.
      </p>
      <p>
        Не завжди можливо задати точні розміри зображення на екрані, тому що під
        час збільшення в'юпорту необхідно буде показувати зображення 300x200 у
        блоці розмірами 600x400 пікселів або більше.
      </p>
      <p>
        Ідеально, якби браузер вибирав зображення не тільки за щільністю
        пікселів, але ще враховував поточний розмір в'юпорту і розмір самого
        зображення на екрані. Для цього йому необхідно знати розмір
        оригінального зображення із запропонованого списку. Якраз це завдання і
        вирішує дескриптор w та атрибут sizes.
      </p>
      <h3>Дескриптор w</h3>
      <p>
        Ми, як і раніше, надаємо одне і те саме зображення у різних розмірах,
        але водночас даємо браузеру більше інформації, щоб він міг сам вибрати
        необхідне зображення, виходячи зі щільності пікселів, розміру в'юпорту
        та оригінального розміру зображення.
      </p>
      <pre class="code">
&lt;img
<br>&nbsp;&nbsp;srcset=&quot;photo-300.jpg&nbsp;300w,&nbsp;photo-600.jpg&nbsp;600w,&nbsp;photo-1200.jpg&nbsp;1200w&quot;
<br>&nbsp;&nbsp;src=&quot;photo-300.jpg&quot;
<br>&nbsp;&nbsp;alt=&quot;Опис&nbsp;зображення&nbsp;для&nbsp;всіх&nbsp;версій&quot;
<br>/&gt;&nbsp; 
</pre>
      <p>
        Позначаючи кожне зображення дескриптором w, в якому вказана ширина цього
        зображення в пікселях, ми перекладаємо всі обчислення і вибір зображення
        на браузер.
      </p>
      <p class="useful">
        Корисно: <br />

        Якщо зображення photo-600.jpg розміром 600x400 пікселів, то помічаємо
        його дескриптором 600w. В імені файлу зображення вказуємо його фізичну
        ширину, щоб не забути, оскільки версій зображення може бути багато.
      </p>
      <h3>Атрибут sizes</h3>
      <p>
        У разі використання дескриптора w, тобто прив'язки до фізичних розмірів
        зображення, необхідно використовувати атрибут sizes, щоб підказати
        браузеру приблизний розмір полотна, на якому в браузері буде малюватися
        зображення. Розміри можна вказувати як у пікселях, так і у відносних
        одиницях.
      </p>
      <p>
        Наприклад, якщо зображення на екрані завжди буде 300px, достатньо
        вказати одне значення.
      </p>
      <pre class="code">
&lt;img
<br>&nbsp;&nbsp;srcset=&quot;photo-300.jpg&nbsp;300w,&nbsp;photo-600.jpg&nbsp;600w,&nbsp;photo-1200.jpg&nbsp;1200w&quot;
<br>&nbsp;&nbsp;sizes=&quot;300px&quot;
<br>&nbsp;&nbsp;src=&quot;photo-300.jpg&quot;
<br>&nbsp;&nbsp;alt=&quot;Опис&nbsp;зображення&nbsp;для&nbsp;всіх&nbsp;версій&quot;
<br>/&gt;  
</pre>
      <p>
        У разі, коли зображення повинно бути на 100% ширини в'юпорту на
        мобільних пристроях до 600px, 300px на екранах 601-900px і 600px на
        екранах ширше, значення sizes буде містити медіа-запити.
      </p>
      <pre class="code">
&lt;img
<br>&nbsp;&nbsp;srcset=&quot;photo-300.jpg&nbsp;300w,&nbsp;photo-600.jpg&nbsp;600w,&nbsp;photo-1200.jpg&nbsp;1200w&quot;
<br>&nbsp;&nbsp;sizes=&quot;(min-width:&nbsp;900px)&nbsp;600px,&nbsp;(min-width:&nbsp;600px)&nbsp;300px,&nbsp;100vw&quot;
<br>&nbsp;&nbsp;src=&quot;photo-300.jpg&quot;
<br>&nbsp;&nbsp;alt=&quot;Опис&nbsp;зображення&nbsp;для&nbsp;всіх&nbsp;версій&quot;
<br>/&gt;  
</pre>
      <ul class="section-list">
        <li>
          (min-width: 900px) 600px - при ширині в'юпорту від 900px, розмір
          зображення 600px.
        </li>
        <li>
          (min-width: 600px) 300px - при ширині в'юпорту від 600px, розмір
          зображення 300px.
        </li>
        <li>
          100vw - повна ширина в'юпорту. Значення за замовчуванням, яке
          вказується останнім.
        </li>
      </ul>
      <p class="attention">
        Увага: <br />

        Браузер читає медіа-вирази, зазначені в атрибуті sizes, зліва направо і
        обирає перше підходяще, тому треба уважно стежити за порядком їх
        оголошення.
      </p>
      <h3>Як браузер вибирає</h3>
      <p>
        Браузер вибирає зображення за дуже простим алгоритмом - множить розмір
        полотна (значення sizes) на щільність пікселів і вибирає найближче,
        підходяще за розміром зображення.
      </p>
      <img
        src="./img/responsive-img-pixel-ratio.png"
        alt="responsive img pixel ratio"
        width="520"
      />
      <p>
        На ілюстрації показаний десктоп і смартфон з шириною зображення 100%
        ширини в'юпорту. Напишемо розмітку респонсивного елемента &lt;img&gt;
        для цього випадку.
      </p>
      <pre class="code">
&lt;img
<br>&nbsp;&nbsp;srcset=&quot;img-1200x714.png&nbsp;1200w,&nbsp;img-3000x1768.png&nbsp;3000w&quot;
<br>&nbsp;&nbsp;sizes=&quot;100vw&quot;
<br>&nbsp;&nbsp;src=&quot;img.png&quot;
<br>&nbsp;&nbsp;alt=&quot;Опис&nbsp;зображення&nbsp;для&nbsp;всіх&nbsp;версій&quot;
<br>/&gt;  
</pre>
      <p>Браузер множить ширину в'юпорту на щільність пікселів.</p>
      <ul class="section-list">
        <li>
          1680 * 2 = 3360 - на ілюстрації це img-3000x1768.png для десктопа.
        </li>
        <li>
          375 * 3 = 1125 - на ілюстрації це img-1200x714.png для смартфона.
        </li>
      </ul>
      <p>
        У разі, коли в sizes задане фіксоване значення ширини зображення,
        браузер помножить його на щільність пікселів. Наприклад, sizes задане
        значення 400px.
      </p>
      <pre class="code">
&lt;img
  srcset="
    photo-300.jpg   300w,
    photo-600.jpg   600w,
    photo-900.jpg   900w,
    photo-1200.jpg 1200w
  "
  sizes="400px"
  src="photo-300.jpg"
  alt="Опис зображення для всіх версій"
/&gt;  
</pre
      >
      <ul class="section-list">
        <li>
          400 * 2 = 800 - для десктопа буде взято зображення максимально близьке
          до 800px, а саме photo-900.jpg.
        </li>
        <li>
          400 * 3 = 1200 - для смартфона буде взято зображення максимально
          близьке до 1200px, а саме photo-1200.jpg.
        </li>
      </ul>
      <p>
        Тобто для мобільного пристрою буде взято більше зображення? Не завжди,
        браузер вибирає те зображення, яке найкраще підходить в цій ситуації.
      </p>
      <p class="note">
        Цікаво: <br />

        На відміну від розробника, який знає тільки розмір зображення і
        приблизний розмір полотна, на якому воно буде відображатися, браузер
        знає всі важливі технічні характеристики пристрою, на якому була
        відкрита веб-сторінка. Крім того, браузер може враховувати інші фактори,
        такі як швидкість інтернет-з'єднання і стан заряду батареї.
      </p>
    </section>
  </body>
</html>
